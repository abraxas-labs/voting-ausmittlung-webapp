<vo-lib-page [contentLoading]="loading"
             header="ELECTION.BUNDLE_OVERVIEW">
  <ng-container *ngIf="result">
    <vo-ausm-proportional-election-info [electionResult]="result.politicalBusinessResult"></vo-ausm-proportional-election-info>
    <div class="my-4">
      <div class="shortcut-container">
        <bc-icon class="clickable-icon" icon="question-circle-o" (click)="showShortcutDialog()"></bc-icon>
      </div>

      <vo-ausm-proportional-election-bundle-table [bundles]="result.bundles"
                                                  [bundleSize]="result.politicalBusinessResult.entryParams.ballotBundleSize"
                                                  [rowSelectable]="true"
                                                  [enablePagination]="true"
                                                  [enableActions]="true"
                                                  [enableSorting]="true"
                                                  [enableFiltering]="true"
                                                  [readOnly]="resultReadOnly"
                                                  (openDetail)="openBundle($event)"
                                                  (reviewBundle)="reviewBundle($event)"
                                                  (succeedBundleReview)="succeedBundleReview($event)"
                                                  (rejectBundleReview)="rejectBundleReview($event)"
                                                  (deleteBundle)="deleteBundle($event)"
                                                  (generateBundleReviewExport)="generateBundleReviewExport($event)"
                                                  (downloadBundleReviewExport)="downloadBundleReviewExport($event)"
                                                  [reviewProcedure]="result.politicalBusinessResult.entryParams?.reviewProcedure"
                                                  [enableReviewMultiple]="result.politicalBusinessResult.entryParams?.reviewProcedure === reviewProcedures.PROPORTIONAL_ELECTION_REVIEW_PROCEDURE_PHYSICALLY"
                                                  [enableReviewColumn]="result.politicalBusinessResult.entryParams?.reviewProcedure === reviewProcedures.PROPORTIONAL_ELECTION_REVIEW_PROCEDURE_PHYSICALLY">
      </vo-ausm-proportional-election-bundle-table>
    </div>
    <div class="sticky-buttons">
    <vo-lib-button-bar [cancelLabel]="'APP.BACK' | translate"
                       [hasSaveButton]="canCreateBundle && !resultReadOnly"
                       [saveLabel]="'ELECTION.NEW_BUNDLE' | translate"
                       [canSave]="true"
                       (cancel)="back()"
                       (save)="createNewBundle()"></vo-lib-button-bar>
    </div>
  </ng-container>
</vo-lib-page>
